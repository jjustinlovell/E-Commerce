const menItems = [
    {
        imgSrc: '../Assets/P1.avif',
        category: 'MEN',
        size: 'XS-3XL',
        title: 'SUPIMA Cotton Crew Neck T-Shirt | Short Sleeve',
        price: 'Rp.199,000'
    },
    {
        imgSrc: '../Assets/P2.avif',
        category: 'MEN',
        size: 'S-XXL',
        title: 'Ribbed Tank Top',
        price: 'Rp.149,000'
    },
    {
        imgSrc: '../Assets/P3.avif',
        category: 'MEN',
        size: '110-160',
        title: 'Graphic T-Shirt',
        price: 'Rp.129,000'
    },
    {
        imgSrc: '../Assets/P4.avif',
        category: 'MEN',
        size: '50-90',
        title: 'Cotton Bodysuit',
        price: 'Rp.99,000'
    },
    {
        imgSrc: '../Assets/P5.avif',
        category: 'MEN',
        size: 'XS-3XL',
        title: 'Linen Blend Long Sleeve Shirt',
        price: 'Rp.299,000'
    },
    {
        imgSrc: '../Assets/P6.avif',
        category: 'MEN',
        size: 'XS-3XL',
        title: 'Linen Blend Long Sleeve Shirt',
        price: 'Rp.299,000'
    },
    {
        imgSrc: '../Assets/P7.avif',
        category: 'MEN',
        size: 'M-XXL',
        title: 'Classic Fit Polo Shirt',
        price: 'Rp.199,000'
    },
    {
        imgSrc: '../Assets/P8.avif',
        category: 'MEN',
        size: 'S-XL',
        title: 'Slim Fit Jeans',
        price: 'Rp.399,000'
    },
    {
        imgSrc: '../Assets/P9.avif',
        category: 'MEN',
        size: 'L-XXL',
        title: 'Casual Blazer',
        price: 'Rp.599,000'
    },
    {
        imgSrc: '../Assets/P10.avif',
        category: 'MEN',
        size: 'M-XL',
        title: 'Workout Shorts',
        price: 'Rp.149,000'
    }
];

const womenItems = [
    {
        imgSrc: '../Assets/C1.avif',
        category: 'WOMEN',
        size: 'XS-XXL',
        title: 'Summer Dress',
        price: 'Rp.299,000'
    },
    {
        imgSrc: '../Assets/C2.avif',
        category: 'WOMEN',
        size: 'S-XXL',
        title: 'Ribbed Tank Top',
        price: 'Rp.149,000'
    },
    {
        imgSrc: '../Assets/C3.avif',
        category: 'WOMEN',
        size: 'M-XL',
        title: 'V-Neck Blouse',
        price: 'Rp.199,000'
    },
    {
        imgSrc: '../Assets/C4.avif',
        category: 'WOMEN',
        size: 'L-XXL',
        title: 'High-Waisted Jeans',
        price: 'Rp.349,000'
    },
    {
        imgSrc: '../Assets/C5.avif',
        category: 'WOMEN',
        size: 'XS-L',
        title: 'Maxi Skirt',
        price: 'Rp.249,000'
    },
    {
        imgSrc: '../Assets/C6.avif',
        category: 'WOMEN',
        size: 'S-XL',
        title: 'Denim Jacket',
        price: 'Rp.399,000'
    },
    {
        imgSrc: '../Assets/C7.avif',
        category: 'WOMEN',
        size: 'M-XXL',
        title: 'Long Sleeve T-Shirt',
        price: 'Rp.149,000'
    },
    {
        imgSrc: '../Assets/C8.avif',
        category: 'WOMEN',
        size: 'S-XXL',
        title: 'Yoga Pants',
        price: 'Rp.199,000'
    },
    {
        imgSrc: '../Assets/C9.avif',
        category: 'WOMEN',
        size: 'XS-XL',
        title: 'Lace Blouse',
        price: 'Rp.249,000'
    },
    {
        imgSrc: '../Assets/C10.avif',
        category: 'WOMEN',
        size: 'M-XL',
        title: 'Cotton Shorts',
        price: 'Rp.129,000'
    }
];

const kidsItems = [
    {
        imgSrc: '../Assets/K1.avif',
        category: 'KIDS',
        size: '110-160',
        title: 'Graphic T-Shirt',
        price: 'Rp.129,000'
    },
    {
        imgSrc: '../Assets/K2.avif',
        category: 'KIDS',
        size: '120-150',
        title: 'Summer Shorts',
        price: 'Rp.99,000'
    },
    {
        imgSrc: '../Assets/K3.avif',
        category: 'KIDS',
        size: '100-140',
        title: 'Hoodie',
        price: 'Rp.199,000'
    },
    {
        imgSrc: '../Assets/K4.avif',
        category: 'KIDS',
        size: '110-160',
        title: 'Jogger Pants',
        price: 'Rp.149,000'
    },
    {
        imgSrc: '../Assets/K5.avif',
        category: 'KIDS',
        size: '120-150',
        title: 'Denim Jacket',
        price: 'Rp.249,000'
    },
    {
        imgSrc: '../Assets/K6.avif',
        category: 'KIDS',
        size: '100-140',
        title: 'Long Sleeve T-Shirt',
        price: 'Rp.129,000'
    },
    {
        imgSrc: '../Assets/K7.avif',
        category: 'KIDS',
        size: '110-150',
        title: 'Puffer Jacket',
        price: 'Rp.299,000'
    },
    {
        imgSrc: '../Assets/K8.avif',
        category: 'KIDS',
        size: '120-160',
        title: 'Swim Trunks',
        price: 'Rp.99,000'
    },
    {
        imgSrc: '../Assets/K9.avif',
        category: 'KIDS',
        size: '110-150',
        title: 'Track Pants',
        price: 'Rp.149,000'
    },
    {
        imgSrc: '../Assets/K10.avif',
        category: 'KIDS',
        size: '100-140',
        title: 'Winter Coat',
        price: 'Rp.349,000'
    }
];

const createSpecialOfferItem = (item) => {
    const descriptionDiv = document.createElement('div');
    descriptionDiv.className = 'description';

    const img = document.createElement('img');
    img.className = 'img-item';
    img.src = item.imgSrc;
    img.alt = item.title;

    const spanDiv = document.createElement('div');
    spanDiv.className = 'span-div';

    const categoryH6 = document.createElement('h6');
    categoryH6.textContent = item.category;

    const sizeH6 = document.createElement('h6');
    sizeH6.textContent = item.size;

    spanDiv.appendChild(categoryH6);
    spanDiv.appendChild(sizeH6);

    const titleH2 = document.createElement('h2');
    titleH2.textContent = item.title;

    const priceDiv = document.createElement('div');
    priceDiv.className = 'price';

    const priceH3 = document.createElement('h3');
    priceH3.textContent = item.price;

    const button = document.createElement('button');
    button.textContent = 'Add';
    button.className = 'add-to-cart';
    button.setAttribute('data-title', item.title);
    button.setAttribute('data-price', item.price);

    priceDiv.appendChild(priceH3);
    priceDiv.appendChild(button);

    descriptionDiv.appendChild(img);
    descriptionDiv.appendChild(spanDiv);
    descriptionDiv.appendChild(titleH2);
    descriptionDiv.appendChild(priceDiv);

    return descriptionDiv;
};

const specialOfferContainer = document.querySelector('.big-div');

const displayItems = (category) => {
    specialOfferContainer.innerHTML = '';
    let selectedItems = [];
    switch (category) {
        case 'MEN':
            selectedItems = menItems;
            break;
        case 'WOMEN':
            selectedItems = womenItems;
            break;
        case 'KIDS':
            selectedItems = kidsItems;
            break;
        default:
            selectedItems = menItems.concat(womenItems, kidsItems);
            break;
    }
    selectedItems.forEach(item => {
        const specialOfferItem = createSpecialOfferItem(item);
        specialOfferContainer.appendChild(specialOfferItem);
    });

    const categoryButtons = document.querySelectorAll('.category li');
    categoryButtons.forEach(button => {
        if (button.dataset.category === category) {
            button.classList.add('active');
        } else {
            button.classList.remove('active');
        }
    });
};



// Initially display all items
displayItems('ALL');

const categoryButtons = document.querySelectorAll('.category li');
categoryButtons.forEach(button => {
    button.addEventListener('click', () => {
        const category = button.getAttribute('data-category');
        displayItems(category);
    });
});

const hamMenu = document.querySelector(".ham-menu");

const offScreenMenu = document.querySelector(".off-screen-menu");

hamMenu.addEventListener("click", (e) => {
    e.stopPropagation();
    hamMenu.classList.toggle("active");
    offScreenMenu.classList.toggle("active");
});

document.addEventListener("click", (e) => {
    if (!offScreenMenu.contains(e.target) && !hamMenu.contains(e.target)) {
        offScreenMenu.classList.remove("active");
        hamMenu.classList.remove("active");
    }
});

const createModal = () => {
    const modal = document.createElement('div');
    modal.className = 'modal';
    
    const modalContent = document.createElement('div');
    modalContent.className = 'modal-content';

    const closeBtn = document.createElement('span');
    closeBtn.className = 'close-btn';
    closeBtn.innerHTML = '&times;';
    closeBtn.addEventListener('click', () => {
        modal.style.display = 'none';
    });

    const message = document.createElement('p');
    message.textContent = 'Item has been added to cart';

    modalContent.appendChild(closeBtn);
    modalContent.appendChild(message);
    modal.appendChild(modalContent);

    return modal;
};

const addToCartButtons = document.querySelectorAll('.add-to-cart');
addToCartButtons.forEach(button => {
    button.addEventListener('click', () => {
        const modal = createModal();
        document.body.appendChild(modal);
        modal.style.display = 'block';

        setTimeout(() => {
            modal.remove();
        }, 3000);
    });
});

const carts = JSON.parse(localStorage.getItem('cartItems')) || [];

const cartItems = document.querySelector('.cart-items');
const totalDisplay = document.querySelector('.total');

const updateCartUI = () => {
    cartItems.innerHTML = '';
    let total = 0;
    carts.forEach(item => {
        const li = document.createElement('li');
        const priceStripped = parseFloat(item.price.replace('Rp.', '').replace(',', ''));
        li.textContent = `${item.title} - Rp. ${priceStripped.toLocaleString()}`;
        cartItems.appendChild(li);
        total += priceStripped;
    });
    totalDisplay.textContent = `Rp. ${total.toLocaleString()}`
};

const addToCart = (item) => {
    carts.push(item);
    localStorage.setItem('cartItems', JSON.stringify(carts));
    updateCartUI();
};

document.addEventListener('click', (event) => {
    if (event.target.classList.contains('add-to-cart')) {
        const title = event.target.dataset.title;
        const price = event.target.dataset.price;
        const item = { title, price };
        addToCart(item);
    }
});

const loadCartFromLocalStorage = () => {
    const savedCart = localStorage.getItem('cartItems');
    if (savedCart) {
        carts = JSON.parse(savedCart);
        updateCartUI();
    }
};


